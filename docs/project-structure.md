## Project Structure

This document describes the high-level folder layout for the TypeScript RAG Techniques monorepo.

- `docs/`
  - `product.md` – Product and roadmap description.
  - `project-structure.md` – This file; documents repository layout.
  - `plan.md` – Rolling implementation plan that tracks technique parity status.
- `projects/`
  - `basic-rag/` – Reference implementation of a simple RAG pipeline.
    - `.tmp/` – Project-local runtime artifacts (vector indexes, evaluation outputs). Folder tracked via `.gitkeep`, contents ignored.
    - `vitest.config.ts` – Vitest configuration and coverage output path definitions.
    - `src/`
      - `__tests__/` – Vitest unit tests (e.g., `ingest.test.ts`, `query.test.ts`) covering ingestion/query helpers.
      - `ingest.ts` – Document ingestion pipeline.
      - `query.ts` – Interactive CLI for querying the vector index.
  - `booking-demo/` – Booking.com-focused demo for Den Bosch (DB-76).
    - `config/booking-demo.config.json` – Points to `shared/assets/data/booking-data.csv`, sets topK/model defaults, and uses `.tmp/index/booking-demo.index.json`.
    - `src/ingest.ts` – Converts each CSV row into a single chunk with rich hotel metadata (price, rating, amenities) and filters to Den Bosch.
    - `src/query.ts` – Re-ranks retrieved hotels by budget/rating/amenities before asking the LLM to summarize a top-5 with rationale; includes interactive CLI prompts.
    - `src/__tests__/` – Unit tests for ingestion parsing, city filtering, reranking, and prompt building.
    - `README.md` – Quickstart for ingest/query commands and configuration notes.
  - `csv-rag/` – Structured RAG over CSV files.
    - `config/csv-rag.config.json` – Declares CSV-specific fields (path, text columns, delimiter).
    - `data/company_metrics.csv` – Sample dataset mixing sustainability, finance, and innovation notes.
    - `src/ingest.ts` – Converts rows into chunkable documents, embeds them, and persists a vector store.
    - `src/query.ts` – Interactive CLI that shows retrieved row metadata alongside answers.
  - `reliable-rag/` – Adds retrieval validation + highlighting.
    - `config/reliable-rag.config.json` – Includes `relevanceThreshold` and `highlightWindow`.
    - `src/ingest.ts` – Reuses the baseline ingestion pipeline.
    - `src/query.ts` – Validates chunks via similarity + lexical overlap before prompting the LLM.
  - `chunk-optimizer/` – CLI that benchmarks chunk sizes and overlaps.
    - `config/chunk-optimizer.config.json` – Lists sample document path and candidate chunk parameters.
    - `src/chunkOptimizer.ts` – Runs experiments, prints a console table, and saves JSON reports under `.tmp/reports/`.
  - `proposition-chunking/` – Generates, grades, and stores LLM-derived propositions.
    - `config/proposition-chunking.config.json` – Configures proposition/grading models and thresholds.
    - `src/ingest.ts` – Creates propositions per chunk and persists high-scoring statements.
    - `src/query.ts` – Answers questions using proposition-level retrieval while showing the original excerpt.
  - `query-transform/` – Query transformation techniques (rewriting, step-back, decomposition).
    - `config/query-transform.config.json` – Configures transformation type and model settings.
    - `src/queryTransform.ts` – Core transformation functions (rewrite, step-back, decompose).
    - `src/ingest.ts` – Reuses standard ingestion pipeline.
    - `src/query.ts` – Applies transformations to queries before retrieval.
  - `hyde/` – Hypothetical Document Embedding (runtime document generation).
    - `config/hyde.config.json` – Configures HyDE model and target document length.
    - `src/hyde.ts` – Generates hypothetical documents answering queries.
    - `src/ingest.ts` – Reuses standard ingestion pipeline.
    - `src/query.ts` – Uses hypothetical document embeddings for retrieval.
  - `hype/` – Hypothetical Prompt Embedding (offline question generation).
    - `config/hype.config.json` – Configures question generation model and questions per chunk.
    - `src/hype.ts` – Generates hypothetical questions for chunks.
    - `src/vectorStore.ts` – Enhanced vector store supporting multiple embeddings per chunk.
    - `src/ingest.ts` – Enhanced ingestion with question generation and multi-embedding storage.
    - `src/query.ts` – Matches queries against question embeddings.
  - `chunk-headers/` – Contextual chunk headers.
    - `config/chunk-headers.config.json` – Standard RAG config plus index path for header-enriched chunks.
    - `src/ingest.ts` – Wraps baseline chunking and prepends document/section headers to each chunk before embedding.
    - `src/query.ts` – Standard query CLI that surfaces header-enriched chunks in the prompt.
  - `relevant-segments/` – Relevant segment extraction.
    - `config/relevant-segments.config.json` – Standard RAG config plus optional `segmentMaxChars`.
    - `src/ingest.ts` – Uses the baseline ingestion pipeline.
    - `src/query.ts` – Stitches adjacent retrieved chunks into longer segments before prompting.
  - `context-window/` – Context window enhancement.
    - `config/context-window.config.json` – Standard RAG config plus optional `contextWindowSize`.
    - `src/ingest.ts` – Uses the baseline ingestion pipeline.
    - `src/query.ts` – Expands retrieved context into configurable windows around hits.
  - `semantic-chunking/` – Semantic (paragraph-based) chunking.
    - `config/semantic-chunking.config.json` – Standard RAG config plus `semanticChunking` flag.
    - `src/ingest.ts` – Switches between fixed-size and paragraph-based chunks based on config.
    - `src/query.ts` – Standard query CLI over semantic chunks.
  - `contextual-compression/` – Contextual compression.
    - `config/contextual-compression.config.json` – Standard RAG config plus optional `compressionMaxChars`.
    - `src/ingest.ts` – Uses the baseline ingestion pipeline.
    - `src/query.ts` – Compresses retrieved chunks with an LLM before answering.
  - `document-augmentation/` – Document augmentation via Q/A generation.
    - `config/document-augmentation.config.json` – Standard RAG config plus `questionsPerChunk`.
    - `src/ingest.ts` – Generates synthetic Q/A pairs per chunk and stores them alongside base chunks.
    - `src/query.ts` – Standard query CLI that can retrieve both base and augmented Q/A chunks.
- `logs/`
  - `decision-log.md` – Running record of cross-cutting decisions (runtime data location, documentation requirements, sample data usage, etc.).
- `tools/`
  - `scrapers/` – Utility scripts for generating demo datasets.
    - `booking/` – Booking.com scraper for Den Bosch hotels that produces a typed CSV of hotels and rooms.
- `shared/`
  - `typescript/`
    - `utils/` – Shared TypeScript utilities:
      - `logging.ts` – Minimal logger abstraction.
      - `config.ts` – Config loading and validation helpers.
      - `llm.ts` – LLM and embedding client interfaces + OpenAI implementation.
      - `types.ts` – Core domain types (`Document`, `Chunk`, etc.).
      - `vectorStore.ts` – Simple in-memory vector store and retrieval utilities.
      - `evaluation.ts` – Simple evaluation helpers (answer comparison, retrieval scoring, stitched segments).
  - `schemas/`
    - `jsonschema/`
      - `config.schema.json` – JSON Schema for per-project config files.
  - `assets/`
    - `data/` – Centralized sample documents reused across all RAG projects (e.g., Nike annual report, `Understanding_Climate_Change.pdf`, CSVs).
    - `sample/` – Example documents / datasets for demos (to be populated per project).

This file should be updated whenever new top-level folders or significant shared modules are added or removed.


